<div class="missions-page">
  <header class="missions-header">
    <div class="header-content">
      <h1 class="header-title font-maglite">Browse Missions</h1>
      <p class="header-subtitle font-hermione">Find your next opportunity from {{ missions.length }} available missions</p>
    </div>
  </header>
  <div class="missions-container">
    <div class="missions-layout">
      <aside class="filters-sidebar">
        <div class="filters-card">
          <div class="filters-header">
            <svg class="filter-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"></path>
            </svg>
            <h3 class="font-maglite">Filters</h3>
          </div>
          <div class="filters-body">
            <div class="filter-group">
              <label class="filter-label font-hermione">Search</label>
              <div class="search-input-wrapper">
                <svg class="search-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                </svg>
                <input
                  type="text"
                  placeholder="Keywords..."
                  [(ngModel)]="searchQuery"
                  class="filter-input font-hermione"
                />
              </div>
            </div>
            <div class="filter-group">
              <label class="filter-label font-hermione">Category</label>
              <select [(ngModel)]="selectedCategory" class="filter-select font-hermione">
                <option value="all">All Categories</option>
                @for (cat of categories; track cat.name) {
                  <option [value]="cat.name">{{ cat.name }}</option>
                }
              </select>
            </div>
            <div class="filter-group">
              <label class="filter-label font-hermione">Experience Level</label>
              <select [(ngModel)]="selectedExperience" class="filter-select font-hermione">
                <option value="all">All Levels</option>
                <option value="Entry">Entry</option>
                <option value="Intermediate">Intermediate</option>
                <option value="Expert">Expert</option>
              </select>
            </div>
            <div class="filter-group">
              <label class="filter-label font-hermione">Location</label>
              <select [(ngModel)]="selectedLocation" class="filter-select font-hermione">
                <option value="all">All Locations</option>
                @for (loc of locations; track loc) {
                  <option [value]="loc">{{ loc }}</option>
                }
              </select>
            </div>
            <app-button variant="outline" (clicked)="clearFilters()" className="w-full font-maglite">
              Clear Filters
            </app-button>
          </div>
        </div>
      </aside>
      <main class="missions-list">
        @if (isLoading) {
          <div class="loading-state">
            <div class="loading-spinner"></div>
            <p class="font-hermione">Loading missions...</p>
          </div>
        }
        @if (error && !isLoading) {
          <div class="error-state">
            <div class="error-icon">
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path>
              </svg>
            </div>
            <p class="font-hermione">{{ error }}</p>
            <app-button variant="default" (clicked)="loadMissions()" className="font-maglite">Try Again</app-button>
          </div>
        }
        @if (!isLoading && !error) {
          <div class="missions-count">
            <p class="font-hermione">Showing {{ filteredMissions.length }} mission{{ filteredMissions.length !== 1 ? 's' : '' }}</p>
          </div>
          <div class="missions-grid">
            @for (mission of filteredMissions; track mission.id) {
              <app-card className="mission-card-wrapper" (click)="navigateToMission(mission.id)">
                <article class="mission-card-content">
                  <div class="mission-card-header">
                    <div class="mission-info">
                      <div class="company-logo">
                        <span class="font-maglite">{{ mission.companyLogo }}</span>
                      </div>
                      <div class="mission-meta">
                        <h3 class="mission-title font-maglite">{{ mission.title }}</h3>
                        <p class="company-name font-hermione">{{ mission.company }}</p>
                      </div>
                    </div>
                    <span class="category-badge font-hermione">{{ mission.category }}</span>
                  </div>
                <p class="mission-description font-hermione">{{ mission.description }}</p>
                <div class="mission-skills">
                  @for (skill of mission.skills; track skill) {
                    <span class="skill-badge font-hermione">{{ skill }}</span>
                  }
                </div>
                <div class="mission-footer">
                  <div class="mission-details">
                    <div class="detail-item">
                      <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                      </svg>
                      <span class="font-hermione">{{ mission.budget }}</span>
                    </div>
                    <div class="detail-item">
                      <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
                      </svg>
                      <span class="font-hermione">{{ mission.location }}</span>
                    </div>
                    <div class="detail-item">
                      <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
                      </svg>
                      <span class="font-hermione">{{ mission.experienceLevel }}</span>
                    </div>
                  </div>
                  <div class="mission-stats font-hermione">
                    {{ mission.applicants }} applicants â€¢ {{ mission.postedDate }}
                  </div>
                </div>
              </article>
              </app-card>
          }
          @if (filteredMissions.length === 0) {
            <div class="no-results">
              <div class="no-results-icon">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                </svg>
              </div>
              <h3 class="font-maglite">No missions found</h3>
              <p class="font-hermione">Try adjusting your filters to see more results</p>
              <app-button variant="outline" (clicked)="clearFilters()" className="font-maglite">
                Clear All Filters
              </app-button>
            </div>
          }
        </div>
        }
      </main>
    </div>
  </div>
</div>
